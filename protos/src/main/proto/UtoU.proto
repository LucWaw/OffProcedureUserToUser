syntax = "proto3";

package utou.v1;

option java_multiple_files = true;
option java_outer_classname = "PingProto";
option java_package = "fr.lucwaw.utou.ping";

import "common.proto";
import "google/protobuf/timestamp.proto";

// Service for sending and receiving pings / notifications.
service PingService {
  // Unary: send a ping to a target user.
  // Client supplies ping_id to ensure idempotency on retries.
  rpc SendPing(SendPingRequest) returns (SendPingResponse) {}
}

// Request to send a ping
message SendPingRequest {
  reserved 1;
  string from_user_id = 2;       // uuid of sender
  string to_user_id = 3;         // uuid of recipient
  google.protobuf.Timestamp created_at = 4; // client timestamp (optional)
}

// Response for SendPing
message SendPingResponse {
  StatusCode status = 1;
  reserved 2; // echo id
  string message = 3; // human message/debug
  string from_user_id = 4;
  string to_user_id = 5;// uuid of recipient
}